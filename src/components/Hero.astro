---
import { Link } from './Link';
import { GitHubIcon, LinkedInIcon, EmailIcon, XIcon } from './Icons';
import { Image } from 'astro:assets';

interface Props {
  avatarSrc?: any;
  greeting?: string;
  bio?: string;
  socialLinks?: {
    github?: string;
    linkedin?: string;
    email?: string;
    x?: string;
  };
  showCTA?: boolean;
  class?: string;
}

const {
  avatarSrc = "",
  greeting = "Hello, I'm a Developer",
  bio = "I'm a Product Manager that loves everything web development and AI",
  socialLinks = {
    github: "https://github.com/albanistrefi",
    linkedin: "https://www.linkedin.com/in/alban-istrefi/",
    email: "mailto:albanistrefi.b@gmail.com",
    x: "https://x.com/albaistx"
  },
  showCTA = true,
  class: className
} = Astro.props;

const socialIconClass = 'text-text-secondary hover:text-accent-primary transition-all duration-200 inline-flex items-center p-1 -m-1 transform-gpu hover:-translate-y-0.5 hover:scale-[1.05] hover:rotate-[4deg] hover:drop-shadow-[0_6px_18px_rgba(255,255,255,0.18)]';
---

<section class={`py-8 lg:py-12 ${className || ''}`}>
  <div class="flex flex-col lg:flex-row items-center gap-6 lg:gap-8">
    {/* Avatar */}
    <div class="flex-shrink-0">
      <div class="profile-avatar w-[140px] h-[140px] lg:w-[180px] lg:h-[180px] rounded-full overflow-hidden">
        {avatarSrc ? (
          typeof avatarSrc === 'string' ? (
            <img
              src={avatarSrc}
              alt="Profile Avatar"
              class="w-full h-full object-cover"
            />
          ) : (
            <Image
              src={avatarSrc}
              alt="Profile Avatar"
              width={540}
              height={540}
              class="w-full h-full object-cover transform-gpu scale-120"
              style="object-position: 50% 0%; transform-origin: top;"
            />
          )
        ) : (
          <div class="w-full h-full bg-gradient-to-br from-accent-primary to-accent-secondary flex items-center justify-center text-background-primary text-[4rem] font-heading font-bold">
            AI
          </div>
        )}
      </div>
    </div>

    {/* Content */}
    <div class="flex-1 text-center lg:text-left">
      <h1 class="text-text-primary mb-3 lg:mb-4 text-[1.75rem] lg:text-[2.5rem] leading-[1.3] lg:leading-[1.2] font-heading font-normal tracking-[-0.02em]">
        <slot name="greeting">{greeting}</slot>
      </h1>
      <div class="text-text-secondary mb-5 lg:mb-6 leading-[1.6] text-[1.0625rem] lg:text-[1.125rem] max-w-none font-mono">
        <slot name="bio">{bio}</slot>
      </div>

      {/* Social Links and CTA */}
      <div class="flex w-full items-center justify-center lg:justify-start">
        <div class="flex items-center gap-3">
          <span class="text-sm font-medium uppercase tracking-wide text-text-tertiary">Connect</span>
          <span class="h-px w-6 bg-border"></span>
          <div class="flex items-center gap-4">
            {socialLinks.github && (
              <Link href={socialLinks.github} external showExternalIcon={false} className={socialIconClass}>
                <GitHubIcon size="1.3rem" aria-label="GitHub Profile" />
              </Link>
            )}
            {socialLinks.linkedin && (
              <Link href={socialLinks.linkedin} external showExternalIcon={false} className={socialIconClass}>
                <LinkedInIcon size="1.3rem" aria-label="LinkedIn Profile" />
              </Link>
            )}
            {socialLinks.x && (
              <Link href={socialLinks.x} external showExternalIcon={false} className={socialIconClass}>
                <XIcon size="1.3rem" aria-label="X Profile" />
              </Link>
            )}
            {socialLinks.email && (
              <Link href={socialLinks.email} showExternalIcon={false} className={socialIconClass}>
                <EmailIcon size="1.3rem" aria-label="Email Contact" />
              </Link>
            )}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
